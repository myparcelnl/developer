# 6. Shipments

We'll start the shipment section with the different shipment option combinations
available in MyParcel. It is highly recommended that you read this first as this
section helps you understand what all the shipment options are and which
combinations are possible. We will not list every possible combination since
there are too many to list. We will look at the different package types and then
look at the different options available to them. Then we bring all of it
together with some examples.

[![Run in Postman](https://run.pstmn.io/button.svg)](https://app.getpostman.com/run-collection/9df5cb4cf2026e7ef4c0?action=collection%2Fimport)

## 6.A Shipment option combinations

### 6.A.1 Package types

There are four different packages types available and determine the name of
shipment. The value is sent with
the <ApiLink to="7_C">ShipmentOptions</ApiLink>
.package_type
field.

#### 1. Package

This is the standard package type used for NL, EU and Global shipments. It
supports a variety of additional options such as insurance, xl format etc. We
will look at these options in more detail later. This package is most commonly
used when creating shipments.

#### 2. Mailbox package

This package type is only available on <DataType type="platform" id="1" />
and <DataType type="platform" id="3" /> for NL shipments that fit into a
mailbox. It does not support additional options.

::: note
If you still make the request with additional options, bear in mind that you may
pay more than is necessary!
:::

#### 3. Letter

This package type is available on <DataType type="platform" id="1" /> for NL, EU
and Global shipments. The label for this shipment is unpaid meaning that you
will need to pay the postal office/courier to send this letter/package.
Therefore, it does not support additional options.

#### 4. Digital stamp

This package type is only available on <DataType type="platform" id="1" /> for
NL shipments and does not support any additional options. Its price is
calculated using the
package <ApiLink to="7_N">weight</ApiLink> .

**Note: This shipment will appear on your invoice
on <DataType type="shipment_status" id="2" /> as opposed to all other package
types, which won't appear on your invoice until
shipment <DataType type="shipment_status" id="3" />.**

### 6.A.2 Delivery types

There are five different delivery types and these specify how the package is
delivered. The value is sent with the ShipmentOptions.delivery_type field.
Currently, delivery types are only available for NL and BE shipments
with <DataType type="package_type" id="1" />. Delivery types 1-5 for NL and 1,4
for BE. The address of the package determines the delivery types available. You
need to use the DeliveryOptions interface to fetch the delivery types for a
specific address. It is also possible to specify a date on which the package has
to be delivered with the ShipmentOptions.delivery_date field. With delivery
types 1 & 3 ShipmentOptions.delivery_date is required.

#### 1. Morning

This option is only available for certain NL addresses. It allows a
Customer/Consumer to have their package delivered early in the morning on the
delivery date specified except on Saturday and Sunday.

#### 2. Standard

This is the standard delivery type.

#### 3. Evening

This option is only available on <DataType type="platform" id="1" />
and <DataType type="platform" id="3" /> for certain NL addresses. It allows a
Customer/Consumer to have their package delivered in the evening on the
specified delivery date.

#### 4. Pickup

The package is delivered at the chosen drop-off point specified by the
Consumer/Customer.

#### 5. Pickup express

The same as pickup but the package is available for pickup before 8:30AM on the
delivery date specified at the drop-off location. Only available on MyParcel.nl
and Flespakket.

### 6.A.3 Options

These are the different package options such as insurance, recipient only,
signature on receipt, XL format etc. These options are specified in
the <ApiLink to="7_C">ShipmentOptions</ApiLink>
object. These options are only available
for <DataType type="package_type" id="1" />.

#### only_recipient

Deliver the package only at address of the intended recipient. This option is
required for Morning and Evening delivery types.

#### signature

Recipient must sign for the package. This option is required for Pickup and
Pickup express delivery types.

#### return

Return the package to the sender when the recipient is not home.

#### large_format

This option must be specified if the dimensions of the package are between 100 x
70 x 50 and 175 x 78 x 58 cm. If the scanned dimensions from the carrier
indicate that this package is large format, and it has not been specified then
it will be added to the shipment in the billing process. This option is also
available for EU shipments.

#### insurance

This option allows a shipment to be insured up to certain amount.
Only <DataType type="package_type" id="1" /> shipments can be insured. NL
shipments can be insured for 500,- euros. EU shipments **must** be insured for
500,- euros. Global shipments **must** be insured for 200,- euros. The following
shipment options are **mandatory** when insuring an NL shipment: only_recipient
and signature.

#### age_check

Only available on <DataType type="platform" id="1" />
and <DataType type="platform" id="3" />. The Customer/Consumer must sign for the
package and only receive it when he is at least 18 years.

### 6.A.4 Examples

#### Pickup

We want to send a package to a consumer in Utrecht. He will pick the package up
at the nearest pickup location. The shipment looks like this.

```json
{
  "data": {
    "shipments": [
      {
        "options": {
          "package_type": 1,
          "only_recipient": 0,
          "signature": 1,
          "delivery_type": 4
        }
      }
    ]
  }
}
```

Let's go through this example. This package will be picked up by the customer,
so it needs to <DataType type="package_type" id="1" />
with <DataType type="delivery_type" id="4" />. All
pickup packages need to have signature set. A pickup location needs to be
specified as well.

#### Evening

We want to send a package to a consumer in Utrecht that has to be delivered on
Tuesday evening. The shipment looks like this.

```json
{
  "data": {
    "shipments": [
      {
        "options": {
          "package_type": 1,
          "delivery_type": 3,
          "only_recipient": 1
        }
      }
    ]
  }
}
```

Let's go through this example. This package will be delivered to the consumer in
the evening, so it needs <DataType type="package_type" id="1" />
with <DataType type="delivery_type" id="3" />. All evening and morning packages
need to have only_recipient set.

#### NL insured

We want to send a Rolex to a customer in Maastricht. This shipment needs to be
insured up to € 5000,–. The shipment looks like this.

```json
{
  "data": {
    "shipments": [
      {
        "options": {
          "package_type": 1,
          "insurance": {
            "amount": 500000,
            "currency": "EUR"
          },
          "signature": 1,
          "only_recipient": 1
        }
      }
    ]
  }
}
```

Only <DataType type="package_type" id="1" /> can be insured so [package type] is
set to 1. Insurance amount needs to be specified in cents and needs to be one of
these amounts (10000, 25000, 50000, 500000, <= 500000). The package needs to be
insured up to 5000 euros, so we set `insurance.amount` to 500000 cents. All NL
insured packages need to have signature and only_recipient set, so we set them
as well.

#### EU and Global insured

We want to send an expensive Japanese vase to a Belgian friend of ours in
Brussels. This package is large format because it's dimensions are within 100 x
70 x 50 and 175 x 78 x 58 cm range. Since this is an EU shipment is must be
insured up to 500 euros.

```json
{
  "data": {
    "shipments": [
      {
        "options": {
          "package_type": 1,
          "insurance": {
            "amount": 50000,
            "currency": "EUR"
          },
          "large_format": 1
        }
      }
    ]
  }
}
```

This package is an EU package so the name must be set to 1. All EU and Global
shipments **must** be insured up to 500 (EU) / 200 (Global) euros, so we set the
insured amount to 50000 **cents.** EU and Global shipments do not have the
only_recipient, signature and return options so these cannot be set for this
shipment.

## 6.B Add Shipment

### 6.B.1 Overview

Add shipments allows you to create standard and related return shipments. The
data format can be JSON or CSV. Only standard national and EU shipments can be
created with CSV. There are two ways of sending CSV: raw CSV or CSV file as part
of multipart/form-data. You can specify the column mapping for CSV by including
it as the first line in the CSV file or as a separate field named '
column_mapping' in the multipart/form-data.

For JSON requests
a <ApiLink to="7_G">ShipmentIds</ApiLink>
object is returned. The ids in
the <ApiLink to="7_G">ShipmentIds</ApiLink>
object will be in the same order they were sent.

For CSV requests <Http code=204 /> with empty response body is returned. If a
request fails then an <Http code="4xx" /> is returned.

### 6.B.2 Reference

| ---                          | ---                                                                                                                                                     |
| **URI**                      | https://api.myparcel.nl/shipments                                                                                                                       |
| **Methods**                  | POST                                                                                                                                                    |
| **Required request headers** | Authorization: basic BASE64(API_KEY)                                                                                                                    |
| ^^                           | User-Agent: CustomApiCall/2                                                                                                                             |
| ^^                           | Content-type: application/vnd.shipment+json;charset=utf-8;version=1.1                                                                                   | \
|                              | (For Shipments JSON request)                                                                                                                            |
| ^^                           | Content-type: application/vnd.shipment_recipients+json;charset=utf-8;version=1.1                                                                        | \
|                              | (For Shipments with recipients column JSON request)                                                                                                     |
| ^^                           | Content-type: application/vnd.return_shipment+json;charset=utf-8;version=1.1                                                                            | \
|                              | (For ReturnShipments JSON request)                                                                                                                      |
| ^^                           | Content-type: application/vnd.unrelated_return_shipment+json;charset=utf-8;version=1.1                                                                  | \
|                              | (For UnrelatedReturnShipments JSON request)                                                                                                             |
| **Optional request headers** | Accept: application/vnd.shipment_label+json;charset=utf-8                                                                                               | \
|                              | (You will receive a URL that points to a PDF. This PDF is not immediately available, you can use the webhook `shipment_label_created` to listen to it.) |
| **URI parameters**           | None.                                                                                                                                                   |
| **Query parameters**         | format = [paper_size]                                                                                                                                   | \
|                              | (When using accept header: application/vnd.shipment_label+json;charset=utf-8)                                                                           |
| ^^                           | positions = label_position                                                                                                                              | \
|                              | (When using accept header: application/vnd.shipment_label+json;charset=utf-8)                                                                           |
| **Request body**             | [array] of Shipment objects.                                                                                                                            | \
|                              | (For Shipments JSON request)                                                                                                                            |
| ^^                           | [array] of ReturnShipment objects.                                                                                                                      | \
|                              | (For ReturnShipments JSON request)                                                                                                                      |
| ^^                           | [array] of UnrelatedReturnShipment objects.                                                                                                             | \
|                              | (For UnrelatedReturnShipments JSON request)                                                                                                             |
| **Response**                 | <Http code="200" /> Content-Type: application/vnd.shipment_ids+json;charset=utf-8 (For standard and related return shipment.)                           |
| **Response body**            | ShipmentIds                                                                                                                                             |
| **Error response**           | <Http code="4xx" />                                                                                                                                     |
| **Error response body**      | Error                                                                                                                                                   |


### 6.B.3 Request Headers

**Content-Type: application/vnd.shipment+json;version=1.1**  
Specify this Content-Type when you want to create standard shipments.

**Content-Type: application/vnd.return_shipment+json;version=1.1**  
Specify this Content-Type when you want to create related return shipments.  
Parent shipment cannot be a concept (<DataType type="shipment_status" id="1" />)
.  
When a label is generated, the status of the shipment is converted to
registered ( [shipment_status] 2).

**Content-Type: application/vnd.unrelated_return_shipment+json;version=1.1**  
Specify this Content-Type when you want to create unrelated return shipments.

### 6.B.4 Examples

In these examples we are going to create shipments.

::: expand h4: Create domestic PostNL shipments

The following example creates a PostNL shipment to a Dutch recipient address.
Domestic PostNL shipments are also supported on sendmyparcel.be, using a Belgian
address instead.

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;version=1.1;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "reference_identifier": "FOO-222-BAR-42",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "only_recipient": 1,
          "signature": 1,
          "return": 1,
          "insurance": {
            "amount": 50000,
            "currency": "EUR"
          },
          "large_format": 0,
          "label_description": "My custom description",
          "age_check": 1
        },
        "carrier": 1
      },
      {
        "reference_identifier": "FOO-223-BAR-43",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Amsterdam",
          "street": "Dorpstraat",
          "number": "123",
          "postal_code": "1020BC",
          "person": "Mrs. Parcel",
          "phone": "02012343546",
          "email": "info@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "only_recipient": 0,
          "signature": 0,
          "return": 0
        },
        "carrier": 1
      }
    ]
  }
}
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "ids": [
      {
        "id": 12345,
        "reference_identifier": "FOO-222-BAR-42"
      },
      {
        "id": 68794,
        "reference_identifier": "FOO-223-BAR-43"
      }
    ]
  }
}
```
:::

::: expand h4: Create domestic bpost shipments

<Message type="note">
    Bpost shipments are only supported on <DataType type="platform" name="belgie" />.
</Message>

##### Request

````
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;version=1.1;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
````

```json
{
  "data": {
    "shipments": [
      {
        "recipient": {
          "cc": "BE",
          "postal_code": "2000",
          "city": "Antwerpen",
          "street": "Wormerplein",
          "number": "16",
          "box_number": "",
          "person": "test"
        },
        "options": {
          "package_type": 1,
          "signature": 0,
          "insurance": {
            "amount": 0,
            "currency": "EUR"
          }
        },
        "carrier": 2,
        "reference_identifier": "bpost shipment"
      }
    ]
  }
}
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "ids": [
      {
        "id": 49566653,
        "reference_identifier": "bpost shipment"
      }
    ]
  }
}
```
:::

::: expand h4: Create domestic DPD shipments

<Message type="note">
    DPD shipments are only supported on <DataType type="platform" name="belgie" />.
</Message>

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;version=1.1;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "recipient": {
          "cc": "BE",
          "postal_code": "2000",
          "city": "Antwerpen",
          "street": "Wormerplein",
          "number": "16",
          "box_number": "",
          "person": "test"
        },
        "options": {
          "package_type": 1
        },
        "carrier": 4,
        "reference_identifier": "Order 123456"
      }
    ]
  }
}
```

##### Response

<Http code="200" />
```json
{
  "data": {
    "ids": [
      {
        "id": 49566517,
        "reference_identifier": "Order 123456"
      }
    ]
  }
}
```
:::

::: expand h4: Create domestic Instabox shipments

<Message type="note">
Instabox shipments are only supported on <DataType type="platform" name="myparcel" />.
</Message>

<Message type="note">
Creating Instabox shipments requires selecting a drop-off point. To receive nearby drop off points, see <ApiLink to="12_A">Drop off points</ApiLink> endpoint.
</Message>

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;version=1.1;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "reference_identifier": "FOO-222-BAR-42",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "label_description": "My custom description",
          "same_day_delivery": 1
        },
        "carrier": 5,
        "drop_off_point": {
          "location_code": "e9149b66-7bee-439b-bab0-7a5d92ddc519",
          "location_name": "Instabox",
          "cc": "NL",
          "city": "Hoofddorp",
          "postal_code": "2132WV",
          "street": "Diamantlaan",
          "number": "77"
        }
      }
    ]
  }
}
```

##### Response

<Http code="200" />
```json
{
  "data": {
    "ids": [
      {
        "id": 49566518,
        "reference_identifier": "FOO-222-BAR-42"
      }
    ]
  }
}
```
:::

::: expand h4: Create domestic PostNL multi collo shipments

<Message type="note">
    Multi collo shipments are only available on <DataType type="platform" name="myparcel" /> and <DataType type="platform" name="flespakket" />.
</Message>

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8;version=1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "reference_identifier": "FOO-222-BAR-42",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "only_recipient": 1,
          "signature": 1,
          "return": 1,
          "insurance": {
            "amount": 50000,
            "currency": "EUR"
          },
          "large_format": 0,
          "label_description": "My custom description",
          "age_check": 1
        },
        "secondary_shipments": [
          { },
          { }
        ],
        "carrier": 1
      }
    ]
  }
}
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "ids": [
      {
        "id": 12345,
        "reference_identifier": "FOO-222-BAR-42"
      }
    ]
  }
}
```
:::

::: expand h4: Create International shipment

<Message type="note">
  Creating shipments to an international destination is possible depending on the chosen carrier:
    
  * PostNL and Bpost shipments are available worldwide.
  * DPD shipments are available in the EU.
  * Instabox is only available in NL.
</Message>


##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "recipient": {
          "cc": "JP",
          "region": "埼玉県",
          "city": "さいたま市",
          "street": "埼玉県さいたま市浦和区 常盤9－21－21",
          "person": "Tanaka san",
          "company": "さいたま国際キリスト教会",
          "email": "saitamakyokai@gmail.com",
          "phone": "0081-48-825-6637"
        },
        "options": {
          "package_type": 1
        },
        "customs_declaration": {
          "contents": 1,
          "invoice": "1231235345345",
          "weight": 30,
          "items": [
            {
              "description": "Sample Product",
              "amount": 10,
              "weight": 20,
              "item_value": {
                "amount": 7000,
                "currency": "EUR"
              },
              "classification": "0181",
              "country": "NL"
            },
            {
              "description": "Sample Product 2",
              "amount": 5,
              "weight": 10,
              "item_value": {
                "amount": 1000,
                "currency": "EUR"
              },
              "classification": "0181",
              "country": "BE"
            }
          ]
        },
        "physical_properties": {
          "weight": 30
        },
        "carrier": 1
      }
    ]
  }
}
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "ids": [
      {
        "id": 3485394579,
        "reference_identifier": null
      }
    ]
  }
}
```
:::

::: expand h4: Create digital stamp shipments

<Message type="note">
    Digital stamp shipments are available on <DataType type="platform" name="myparcel" /> and to Dutch destinations only.
</Message>

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "reference_identifier": "FOO-DPZ-BAR-46",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 4,
          "label_description": "This is a digital stamp shipment!"
        },
        "physical_properties": {
          "weight": 30
        },
        "carrier": 1
      }
    ]
  }
}
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "ids": [
      {
        "id": 39234953,
        "reference_identifier": null
      }
    ]
  }
}
```
:::

::: expand h4: Create PostNL shipment with NL pickup location

<Message type="note">
    Only available on <DataType type="platform" name="myparcel" /> and <DataType type="platform" name="flespakket" />.
</Message>

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "delivery_type": 4,
          "delivery_date": "2015-07-12 00:00:00",
          "only_recipient": 0,
          "signature": 1,
          "return": 0
        },
        "pickup": {
          "postal_code": "2132BH",
          "street": "Burgemeester van Stamplein",
          "city": "Hoofddorp",
          "number": "270",
          "location_name": "Albert Heijn"
        },
        "carrier": 1
      }
    ]
  }
}
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "ids": [
      {
        "id": 12345,
        "reference_identifier": null
      }
    ]
  }
}
```
:::

::: expand h4: Create bpost shipment with BE pickup location

<Message type="note">
    Only available on <DataType type="platform" name="belgie" />.
</Message>

###### Request

```
POST https://api.sendmyparcel.be/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "carrier": 2,
        "recipient": {
          "cc": "BE",
          "city": "Antwerpen",
          "street": "Adriaan Brouwerstraat",
          "number": "16",
          "person": "Test",
          "postal_code": "2000"
        },
        "options": {
          "package_type": 1,
          "delivery_type": 4
        },
        "pickup": {
          "city": "ANTWERPEN",
          "location_code": "618925",
          "location_name": "KLAPKRANT",
          "number": "15",
          "postal_code": "2000",
          "street": "KLAPDORP"
        },
        "reference_identifier": "order-012356"
      }
    ]
  }
}
```

##### Response

<Http code="200" />
```json
{
  "data": {
    "ids": [
      {
        "id": 49571535,
        "reference_identifier": "order-012356"
      }
    ]
  }
}
```
:::

::: expand h4: Create DPD shipment with BE pickup location

<Message type="note">
    Only available on <DataType type="platform" name="belgie" />.
</Message>

##### Request

```
POST https://api.sendmyparcel.be/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "carrier": 4,
        "recipient": {
          "cc": "BE",
          "city": "Antwerpen",
          "street": "Adriaan Brouwerstraat",
          "number": "16",
          "person": "Test",
          "postal_code": "2000"
        },
        "options": {
          "package_type": 1,
          "delivery_type": 4
        },
        "pickup": {
          "postal_code": "2000",
          "location_name": "PRESS WINKEL",
          "city": "Antwerpen",
          "street": "HOOGSTRAAT",
          "number": "75",
          "cc": "BE",
          "location_code": "BE11468"
        },
        "reference_identifier": "DPD pickup"
      }
    ]
  }
}
```

##### Response

<Http code="200" />
```json
{
  "data": {
    "ids": [
      {
        "id": 49571535,
        "reference_identifier": "DPD pickup"
      }
    ]
  }
}
```
:::

::: expand h4: Create multi collo shipment with NL pickup location

<Message type="note">
    Only available on <DataType type="platform" name="myparcel" /> and <DataType type="platform" name="flespakket" />.
</Message>

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8;version=1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "reference_identifier": "FOO-222-BAR-42",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "only_recipient": 1,
          "signature": 1,
          "return": 1,
          "insurance": {
            "amount": 50000,
            "currency": "EUR"
          },
          "large_format": 0,
          "label_description": "My custom description",
          "age_check": 1
        },
        "pickup": {
          "postal_code": "2132BH",
          "street": "Burgemeester van Stamplein",
          "city": "Hoofddorp",
          "number": "270",
          "location_name": "Albert Heijn"
        },
        "secondary_shipments": [
          { },
          { }
        ],
        "carrier": 1
      }
    ]
  }
}
```

##### Response

<Http code="200" />
```json
{
  "data": {
    "ids": [
      {
        "id": 12345,
        "reference_identifier": "FOO-222-BAR-42"
      }
    ]
  }
}
```
:::

::: expand h4: Create shipment with BE pickup location

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "recipient": {
          "cc": "BE",
          "postal_code": "2000",
          "city": "Antwerpen",
          "region": "België",
          "street": "Adriaan Brouwerstraat 12",
          "street_additional_info": "",
          "person": "Mr. Parcel"
        },
        "pickup": {
          "city": "ANTWERPEN",
          "street": "HOOGSTRAAT",
          "postal_code": "2000",
          "number": "75",
          "location_code": "BE0Q07",
          "retail_network_id": "LD-01",
          "location_name": "K&J TRADING"
        },
        "options": {
          "package_type": 1,
          "delivery_type": 4,
          "delivery_date": "2017-08-09 16:00:00",
          "only_recipient": 0,
          "signature": 1,
          "return": 0,
          "insurance": {
            "amount": 50000,
            "currency": "EUR"
          },
          "large_format": 0,
          "cooled_delivery": 0
        },
        "carrier": 1
      }
    ]
  }
}
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "ids": [
      {
        "id": 12345,
        "reference_identifier": null
      }
    ]
  }
}
```
:::

::: expand h4: Create related return shipment

<Message type="note">
The following example creates a PostNL return shipment. On <DataType type="platform" name="belgie" /> return shipments are only available with <DataType type="carrier" name="bpost" />.
</Message>

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.return_shipment+json;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "return_shipments": [
      {
        "parent": 5,
        "carrier": 1,
        "email": "testing@myparcel.nl",
        "name": "Mr. Parcel",
        "options": {
          "package_type": 1,
          "only_recipient": 0,
          "signature": 1,
          "return": 0,
          "insurance": {
            "amount": 10000,
            "currency": "EUR"
          }
        }
      }
    ]
  }
}
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "ids": [
      {
        "id": 12345,
        "reference_identifier": null
      }
    ]
  }
}
```
:::

::: expand h4: Create unrelated return shipment

<Message type="note">
The following example creates a PostNL return shipment. On <DataType type="platform" name="belgie" /> return shipments are only available with <DataType type="carrier" name="bpost" />.
</Message>

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.unrelated_return_shipment+json;charset=utf-8
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "return_shipments": [
      {
        "options": {
          "package_type": 1,
          "only_recipient": 0,
          "signature": 0,
          "return": 0,
          "insurance": {
            "amount": 0,
            "currency": "EUR"
          },
          "large_format": 0,
          "label_description": "My custom description"
        },
        "carrier": 1,
        "email": "testing@myparcel.nl",
        "name": "Test"
      }
    ]
  }
}
```

##### Response

<Http code="200" />
```json
{
  "data": {
    "ids": [
      {
        "id": 12345,
        "reference_identifier": null
      }
    ]
  }
}
```
:::

## 6.C Delete Shipment

::: note
Deleting shipments is not done often. This can only be done for shipments for
which a label has not yet been
created (<DataType type="shipment_status" id="1" />). Especially since shipments
not handed over to the distributor will not be billed by MyParcel. Therefore,
when unused shipments are not deleted this has no financial consequences.
:::

### 6.C.1 Overview

Use this link to remove shipments. You can specify multiple shipment ids by
semicolon separating them on the URL. Only shipments
with <DataType type="shipment_status" id="1" /> can be deleted. This method
returns <Http code=204 /> if successful.
If the shipment doesn't exist a <Http code="422" /> is returned.

### 6.C.2 Reference

| ---                          | ---                                          |
| **URI**                      | https://api.myparcel.nl/shipments/id[;id]    |
| **Methods**                  | DELETE                                       |
| **Required request headers** | Authorization: basic BASE64(API_KEY)         |
| ^^                           | User-Agent: CustomApiCall/2                  |
| ^^                           | Content-type: application/json;charset=utf-8 |
| **URI parameters**           | id = [Shipment].id                           |
| **Query parameters**         | None.                                        |
| **Request body**             | None.                                        |
| **Response**                 | <Http code="204" />                          |
| **Response body**            | None.                                        |
| **Error response**           | <Http code="4xx" />.                         |
| **Error response body**      | Error                                        |

### 6.C.3 Parameters

**id**  
Data type: [integer]  
The id of the shipment to delete. You can specify multiple shipments by
semicolon separating them.

### 6.C.4 Examples

::: expand h4: Remove a shipment with id 1234.

##### Request

```
DELETE https://api.myparcel.nl/shipments/1234 HTTP/1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

##### Response

<Http code="204" />
:::

## 6.D Generate unrelated return shipment url

### 6.D.1 Overview

This endpoint is often used by external parties to facilitate return shipments
on a dedicated part of their website, mainly when offering reverse logistics
e.g. repair services. It will allow the consumer to send packages to the
merchant directly from the merchant's website. If this option is not enable
then <Http code=404 /> Not Found is returned.

### 6.D.2 Reference

| ---                          | ---                                                |
| **URI**                      | https://api.myparcel.nl/return_shipments           |
| **Methods**                  | POST                                               |
| **Required request headers** | Authorization: basic BASE64(API_KEY)               |
| ^^                           | User-Agent: CustomApiCall/2                        |
| **URI parameters**           | None.                                              |
| **Query parameters**         | None.                                              |
| **Request body**             | None.                                              |
| **Response**                 | <Http code="200" /> Content-Type: application/json |
| **Response body**            | DownloadUrl object.                                |
| **Error response**           | <Http code="4xx" />                                |
| ^^                           | <Http code="5xx" />                                |
| **Error response body**      | None.                                              |

### 6.D.3 Examples

::: expand h4: Generate unrelated return shipment

##### Request

```
POST https://api.myparcel.nl/return_shipments
User-Agent: CustomApiCall/2
HTTP/1.1 Authorization: basic
eUVJV1hFc3ZhMkxPeWRvVlM1bDVVZVJwamJNdVZQQXJSUGhFVkpCYw==
```

##### Response

<Http code="200" />
```
Content-Type: application/json
```

```json
{
  "data": {
    "download_url": {
      "link": "https://myparcel.me/returns/902223ede2f50288ecfbbd21a8c8fd7e"
    }
  }
}
```
:::

## 6.E Get Shipment

### 6.E.1 Overview

With this endpoint you can get shipments. You can use the 'q' query parameter to
search for shipments. Depending on the Accept request header either JSON or CSV
is returned. Multiple shipment ids can be specified on the URI by using
semicolon. There are limitation when getting data back as CSV. When using CSV
you will only get the most recent status of shipment.

Upon success either a JSON [array]
of <ApiLink to="7_A">Shipment</ApiLink>
objects or a CSV
file is returned.

### 6.E.2 Reference

| ---                          | ---                                                     |
| **URI**                      | https://api.myparcel.nl/shipments/[id[;id]]             |
| **Methods**                  | GET                                                     |
| **Required request headers** | Authorization: basic BASE64(API_KEY)                    |
| ^^                           | User-Agent: CustomApiCall/2                             |
| **URI parameters**           | id = [Shipment].id                                      |
| **Query parameters**         | q = [string]                                            |
| ^^                           | reference_identifier = [reference_identifier]           |
| ^^                           | dropoff_today = [boolean]                               |
| ^^                           | status = [shipment_status]                              |
| ^^                           | from = [timestamp]                                      |
| ^^                           | to = [timestamp]                                        |
| ^^                           | page = [integer]                                        |
| ^^                           | size = [integer]                                        |
| ^^                           | sort = [string]                                         |
| ^^                           | order = [sort_order]                                    |
| **Optional request headers** | Accept: application/json;charset=utf-8 (For JSON)       |
| **Request body**             | None.                                                   |
| **Response**                 | <Http code="200" />                                     |
| ^^                           | Content-Type: application/json;charset=utf-8 (For JSON) |
| **Response body**            | array of Shipment objects (For JSON)                    |
| **Error response**           | <Http code="4xx" />                                     |
| **Error response body**      | Error                                                   |

### 6.E.3 Parameters

**id**  
Data type: [integer]  
This is the shipment id. You can specify multiple shipment ids by semicolon
separating them on the URI.

**reference_identifier**  
Data type: [string]  
This is an optional arbitrary identifier to identify the shipment.

**dropoff_today**  
Data type: [boolean]  
Use this parameter to filter for shipments that need to dropped at a PostNL
location today.

**q**  
Data type: [string]  
Use this parameter to search through all the fields of a shipment object
including the embedded objects

**status**  
Data type: [shipment_status]  
Use this parameter to specify the shipment status to filter on. You can specify
multiple status by semicolon separating them on the URI.

**from**  
Data type: [date]  
Use this parameter to filter on the shipment creation date. This filter will set
the lower bound of the date search range.

**to**  
Data type: [date]  
Use this parameter to filter on the shipment creation date. This filter will set
the upper bound of the date search range.

**page**  
Data type: [integer]  
Page number. Maximum value is 1000 and minimum is 1. Defaults to 1.

**size**  
Data type: [integer]  
Items per page. Maximum value is 200 and minimum is 30. Defaults to 30.

**sort**  
Data type: [string]  
Shipment object field to sort on.
See <ApiLink to="7_A">Shipment</ApiLink>
object

**order**  
Data type: [sort_order]  
Sort order for sort filter. Defaults to ASC.

### 6.E.4 Examples

::: expand h4: Search for shipments

Search shipments for fields containing 'Niels' with status 'pending'. The first
shipment has 'Jan' in the person field.

##### Request

```
GET https://api.myparcel.nl/shipments?q=Niels&status=1
User-Agent: CustomApiCall/2
HTTP/1.1 Authorization: basic
eUVJV1hFc3ZhMkxPeWRvVlM1bDVVZVJwamJNdVZQQXJSUGhFVkpCYw==
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "search_results": {
      "shipments": [
        {
          "id": 12345,
          "reference_identifier": "FOO-222-BAR-42",
          "recipient": {
            "cc": "NL",
            "region": "Zuid-Holland",
            "city": "Hoofddorp",
            "street": "Antareslaan",
            "number": "31",
            "postal_code": "2132JE",
            "person": "Mr. Parcel",
            "phone": "0233030315",
            "email": "testing@myparcel.nl"
          },
          "options": {
            "package_type": 1,
            "only_recipient": 1,
            "signature": 1,
            "return": 1,
            "insurance": {
              "amount": 50000,
              "currency": "EUR"
            },
            "large_format": 0
          },
          "sender": {
            "cc": "NL",
            "region": "Zuid-Holland",
            "city": "Amsterdam",
            "street": "Dorpstraat",
            "number": "123",
            "postal_code": "1020BC",
            "person": "Mrs. Parcel",
            "phone": "02012343546",
            "email": "info@myparcel.nl"
          },
          "carrier_id": 1,
          "status": 1,
          "price": {
            "amount": 535,
            "currency": "EUR"
          },
          "barcode": "3SMYPA77773333",
          "secondary_shipments": null,
          "multi_collo_main_shipment_id": null,
          "created": "2017-01-31 08:00:00",
          "modified": "2017-01-31 09:00:00"
        }
      ],
      "page": 1,
      "size": 30,
      "results": 50
    }
  }
}
```
:::

## 6.F Get Shipment label

### 6.F.1 Overview

Get shipment label. You can specify label format and starting position of labels
on the first page with the **format** and **position** query parameters. The **
position** query only works when you specify the A4 format and is only applied
on the first page with labels.Accounts with **Post-payment** payment methods can
fetch multiple labels in one call. For accounts with **Pre-payment** payment
method an `<Http code=402 /> Payment Required` with a <ApiLink to="7_P">
PaymentInstructions</ApiLink> object is returned if the label has not been paid
for yet.

When a label for a multi collo shipment is requested, labels for all shipments
part of the multi collo shipment will be generated. Each shipment within a multi
collo shipment MUST be labeled with a specific label containing a unique
barcode.

Upon error <Http code="4xx" /> with a response body containing an Error is
returned.

If you want to retrieve more than 25 labels in one response, you can use 
`Accept: application/vnd.shipment_label_link+json;charset=utf8`. You will
receive a URL to a label, but the label is not immediately available and will
return an <Http code=404 /> until it is ready. Depending on the number of
labels, this process will take between 3 seconds and 3 minutes. You can
regularly check whether the label is available or you can use
the [label created webhooks](#10) .

### 6.F.2 Reference

| ---                          | ---                                                                                                                                         |
| **URI**                      | https://api.myparcel.nl/shipment_labels/id[;id]                                                                                             |
| **Methods**                  | GET                                                                                                                                         |
| **Required request headers** | Authorization: basic BASE64(API_KEY)                                                                                                        |
| ^^                           | User-Agent: CustomApiCall/2                                                                                                                 |
| ^^                           | Accept: application/pdf                                                                                                                     | \
|                              | (For the PDF binary. This is the default.) For processing less than 25 labels.                                                              |
| ^^                           | Accept: application/json;charset=utf8                                                                                                       | \
|                              | (For <ApiLink to="7_R">ShipmentLabelDownloadLink</ApiLink>) For processing less than 25 labels.                                             |
| ^^                           | Accept: application/vnd.shipment_label_link+json;charset=utf8                                                                               | \
|                              | (For <ApiLink to="7_R">ShipmentLabelDownloadLink</ApiLink>) For processing multiple labels. Recommended if you request more than 25 labels. |
| **URI parameters**           | id = Shipment.id                                                                                                                            |
| **Query parameters**         | format = [paper_size]                                                                                                                       |
| ^^                           | positions = [label_position]                                                                                                                |
| **Request body**             | None.                                                                                                                                       |
| **Response**                 | <Http code="200" /> Content-Disposition: attachment; filename="PDF_FILE" Content-Type: application/pdf                                      |
| ^^                           | <Http code="200" /> Content-Type: application/json                                                                                          | \
|                              | (When using "Accept: application/json;charset=utf8" or "Accept: application/vnd.shipment_label_link+json;charset=utf8")                     |
| **Response body**            | Shipment label PDF                                                                                                                          |
| ^^                           | <ApiLink to="7_R">ShipmentLabelDownloadLink</ApiLink>                                                                                       |
| ^^                           | PaymentInstructions                                                                                                                         |
| **Error response**           | <Http code="402" />                                                                                                                         |
| **Error response body**      | Content-Type: application/json                                                                                                              | \
|                              | (When payment is required)                                                                                                                  |

### 6.F.3 Parameters

**id**  
Data type: [integer]  
This is the shipment id. You can specify multiple shipment ids by semicolon
separating them on the URI.

**format**  
Data type: [paper_size]  
The paper size of the PDF. Currently, A4 and A6 are supported. When A4 is chosen
you can specify the label position. When requesting the label for a shipment
that contains a custom form, you can only request a A4 format.

**positions**  
Data type: [label_position]  
The position of the label on an A4 sheet. You can specify multiple positions by
semicolon separating them on the URI. Positioning is only applied on the first
page with labels. All subsequent pages will use the default positioning 1,2,3,4.

### 6.F.4 Examples

::: expand h4: Get Shipment label

##### Request

```
GET https://api.myparcel.nl/shipment_labels/12 HTTP/1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

##### Response

<Http code="200" />

```
Content-Disposition: attachment;filename="123123123.pdf" 
Content-Type: application/pdf
(...PDF content)
```
:::

::: expand h4: Get shipment label download link

##### Request

```
GET https://api.myparcel.nl/shipment_labels/12 HTTP/1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
Accept: application/json;charset=utf-8
```

##### Response

<Http code="200" />

```json

{
  "data": {
    "pdfs": {
      "url": "https://api.myparcel.nl/pdfs/461efc8b5c7e71dbd0c39a25067bda9455b0ca5a"
    }
  }
}
```
:::

::: expand h4: Get shipment label download link to handle multiple labels

##### Request

```
GET https://api.myparcel.nl/shipment_labels/12 HTTP/1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
Accept: application/vnd.shipment_label_link+json;charset=utf8
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "pdfs": {
      "url": "/pdfs/461efc8b5c7e71dbd0c39a25067bda9455b0ca5a"
    }
  }
}
```
:::

::: expand h4: Get shipment label with different format and position

Get label for shipment with id 2. The label will be printed on an A4 sheet and
the label position will be at the bottom-right.

##### Request

```
GET https://api.myparcel.nl/shipment_labels/2?format=A4&positions=3;4 HTTP/1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

##### Response

<Http code="200" />
```
Content-Disposition: attachment; filename="456456456456.pdf" Content-Type:
application/pdf (...PDF content)
```
:::

## 6.G Track Shipment

### 6.G.1 Overview

Get detailed track and trace information for a shipment. Upon
success <Http code="200" /> is returned with an [array]
of <ApiLink to="7_L">TrackTrace</ApiLink>
objects.

### 6.G.2 Limitations

For retrieving Track & Trace data, we recommend passing multiple shipment IDs at
once to avoid hitting the <ApiLink to="1_D">rate limit</ApiLink> .

### 6.G.3 Reference

| ---                     | ---                                                  |
| **URI**                 | https://api.myparcel.nl/tracktraces/id[;id]          |
| **Methods**             | GET                                                  |
| **Required**            | request headers Authorization: basic BASE64(API_KEY) |
| ^^                      | User-Agent: CustomApiCall/2                          |
| **URI parameters**      | id= [Shipment].id                                    |
| **Query parameters**    | page= [integer]                                      |
| ^^                      | size= [integer]                                      |
| ^^                      | sort= [string]                                       |
| ^^                      | order= [sort_order]                                  |
| ^^                      | extra_info= [extra_info]                             |
| **Request body**        | None.                                                |
| **Response**            | <Http code="200" />                                      |
| ^^                      | Content-Type: application/json;charset=utf-8         |
| **Response body**       | array of TrackTrace objects.                         |
| **Error response**      | <Http code="4xx" />                             |
| **Error response body** | Error                                                |

### 6.G.4 Parameters

**id**  
Data type: [integer]  
This is the shipment id. You can specify multiple shipment ids by semicolon
separating them on the URI.

**page**  
Data type: [integer]  
Page number. Maximum value is 1000 and minimum is 1. Defaults to 1.

**size**  
Data type: [integer]  
Items per page. Maximum value is 200 and minimum is 30. Defaults to 30.

**sort**  
Data type: [string]  
TrackTrace object field to sort on.
See <ApiLink to="7_L">TrackTrace</ApiLink>

**order**  
Data type: [sort_order]  
Sort order for sort filter. Defaults to ASC.

**extra_info**  
Data type: [string]  
Only the delivery_moment option is available. Delivery moment is not included by
default for performance reasons. Example:

extra_info=delivery_moment

### 6.G.5 Examples


::: expand

##### Request

```
GET https://api.myparcel.nl/tracktraces/1212321?extra_info=delivery_moment
HTTP/1.1
User-Agent: CustomApiCall/2
Accept-Language: en_GB
Authorization: bearer BASE64_ENCODED_API_KEY
```

##### Response

<Http code="200" />
```json
{
  "data": {
    "tracktraces": [
      {
        "shipment_id": 43393092,
        "code": "I01",
        "description": "Zending bezorgd",
        "time": "2019-02-16 15:09:53",
        "link_consumer_portal": "https://postnl.nl/tracktrace/?B=3SMYPA126329191&P=2182KD&D=NL&T=C&L=NL",
        "link_tracktrace": "https://postnl.nl/tracktrace/?B=3SMYPA126329191&P=2182KD&D=NL&T=C&L=NL",
        "recipient": {
          "cc": "NL",
          "postal_code": "2231je",
          "city": "Potloden dorp",
          "street": "Gumlaan",
          "number": "101",
          "number_suffix": "",
          "person": "Hard Kauwer"
        },
        "sender": {
          "cc": "NL",
          "postal_code": "4337WA",
          "city": "Middelburg",
          "street": "Jacobus Spijkerdreef",
          "number": "10",
          "person": "Tamara Faker",
          "company": "Potlodenshop",
          "email": "tamluca@potlodenshop.nl",
          "phone": "0673826485"
        },
        "options": {
          "package_type": 1,
          "only_recipient": 0,
          "signature": 0,
          "return": 0,
          "insurance": {
            "amount": 0,
            "currency": "EUR"
          },
          "large_format": 0,
          "cooled_delivery": 0,
          "age_check": 0
        },
        "pickup": null,
        "delayed": false,
        "location": {
          "name": "Depot Den Bosch",
          "cc": "NL",
          "city": "S-Hertogenbosch",
          "postal_code": "5222AL",
          "street": "Ketelaarskampweg",
          "number": "7",
          "number_suffix": null,
          "longitude": 5.27349901,
          "latitude": 51.70326781
        },
        "status": {
          "current": 7,
          "main": "delivered",
          "final": true
        },
        "history": [
          {
            "code": "A01",
            "status": 2,
            "main": "registered",
            "description": "De zending is aangemeld bij PostNL en wordt volgbaar",
            "time": "2019-02-15 00:00:00",
            "delayed": false,
            "location": {
              "name": "Depot Den Bosch",
              "cc": "NL",
              "city": "S-Hertogenbosch",
              "postal_code": "5222AL",
              "street": "Ketelaarskampweg",
              "number": "7",
              "number_suffix": null,
              "longitude": 5.27349901,
              "latitude": 51.70326781
            }
          },
          {
            "code": "B01",
            "status": 3,
            "main": "handed_to_carrier",
            "description": "Zending is ontvangen door PostNL",
            "time": "2019-02-15 17:09:55",
            "delayed": false,
            "location": null
          },
          {
            "code": "J01",
            "status": 4,
            "main": "sorting",
            "description": "Zending gesorteerd in sorteercentrum",
            "time": "2019-02-16 08:13:29",
            "delayed": false,
            "location": null
          },
          {
            "code": "J05",
            "status": 5,
            "main": "distribution",
            "description": "Bezorger is onderweg",
            "time": "2019-02-16 08:35:51",
            "delayed": false,
            "location": null
          }
        ],
        "delivery_moment_type": "estimated",
        "delivery_moment": {
          "start": {
            "date": "2019-02-19 17:15:00.000000",
            "timezone_type": 3,
            "timezone": "Europe/Amsterdam"
          },
          "end": {
            "date": "2019-02-19 19:45:00.000000",
            "timezone_type": 3,
            "timezone": "Europe/Amsterdam"
          }
        }
      }
    ]
  }
}
```
:::

## 6.H Multi collo shipments

### 6.H.1 Overview

This section describes the working of multi collo shipments. The multi collo
shipment is a special name of shipment which requires a specific way of
handling. A multi collo shipment is a shipment which contains multiple packages
for the same address and the same delivery date. It contains of one 'main'
shipment and at least one 'secondary' shipment. Working with multi collo
shipments does not require using specific endpoints but existing endpoints have
specific behaviour in combination with multi collo shipments.

### 6.H.2 Create

This section extends the <ApiLink to="6_B">base functionality</ApiLink>.

Creating a multi collo shipment basically means using one extra
property `secondary_shipments`. This property can be used to pass an array of
json objects. Each object represents an extra shipment to be part of the multi
collo shipment. All required properties of the main shipment are inherited by
the secondary shipments so there is no need to pass data with a secondary
shipment, but it is allowed to pass specific data. This might be useful for
example to pass a specific reference identifier per secondary shipment. Shipment
options MUST be provided only with the main shipment. Secondary shipments only
can be used in combination with <DataType type="package_type" id="1" /> and can
only be used for shipments to NL en BE.

```json
{
  "secondary_shipments": [
    {
      "reference_identifier": "SECONDARY-SHIPMENT"
    }
  ]
}
```

### 6.H.3 Update

| ---                          | ---                                                     |
| **URI**                      | https://api.myparcel.nl/shipments                       |
| **Methods**                  | PUT                                                     |
| **Required request headers** | Authorization: basic BASE64(API_KEY)                    |
| ^^                           | Content-Type: application/vnd.shipment+json;version=1.1 |

Updating a secondary shipment can be done in several ways using different
endpoints.

#### Add secondary shipment

Adding an existing shipment to an existing multi collo shipment can be done in
two ways.

1. Post complete shipment with an extra shipment passed in
   the `secondary_shipments` property.  
```json
{
  "secondary_shipments": [
    {
      "id": 12345
    },
    {
      "id": 34567
    }
  ]
}
```

2. Update a single existing shipment with a reference to a multi collo shipment
   via the `multi_collo_main_shipment_id`.
```json
{
  "multi_collo_main_shipment_id": 34567
}
```

Adding a non-existent shipment to an existing multi collo shipment can be done
via the `secondary_shipments` property of the main shipment.  

```json
{
  "secondary_shipments": [
    {
      "id": 12345
    }
  ]
}
```

Note that the existing secondary shipments should always be passed as well
because they will be deleted otherwise.

#### Remove secondary shipment

Removing a secondary shipment from a multi collo shipment can be done in 3
different ways.

1. Delete secondary shipment. Make use of
the <ApiLink to="6_C">delete endpoint</ApiLink> when
   passing the id of the secondary shipment. This will cause the secondary
   shipment to be deleted and removed from the multi collo shipment.

2. Omit the secondary shipment in
   an <ApiLink to="6_H_3">update</ApiLink> request on the multi collo
   main shipment. This will cause the secondary shipment to be deleted and be
   removed from the multi collo shipment.

3. Unlink a secondary shipment from the multi collo shipment. This is done by a
   PUT request for a specific secondary shipment with an empty reference to the
   multi collo main shipment. This will cause the shipment to be removed from
   the multi collo shipment and still be available as normal shipment. The data
   passed in the PUT request for secondary shipment 1234 to remove it from its
   multi collo shipment should contain besides all other required data:

```json
{
  "id": 1234,
  "multi_collo_main_shipment_id": null
}
```

### 6.H.4 Delete

This section extends the <ApiLink to="6_C">base functionality</ApiLink>.
Deleting a multi collo main shipment will result in a complete removal of the
main and secondary shipments of the multi collo shipment.

Deleting a secondary shipment will result in deleting the shipment and removal
of the secondary shipment from the multi collo shipment.

### 6.H.5 Examples

::: expand h4: Create national multi collo shipment

##### Request

```
POST https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8;version=1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "reference_identifier": "FOO-222-BAR-42",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "only_recipient": 1,
          "signature": 1,
          "return": 1,
          "insurance": {
            "amount": 50000,
            "currency": "EUR"
          },
          "large_format": 0,
          "label_description": "My custom description",
          "age_check": 1
        },
        "secondary_shipments": [
          {
            "reference_identifier": "REF-SECONDARY-SHIPMENT"
          }
        ],
        "carrier": 1
      }
    ]
  }
}
```

##### Response

<Http code="200" />

```json
{
  "data": {
    "ids": [
      {
        "id": 12345,
        "reference_identifier": "FOO-222-BAR-42"
      }
    ]
  }
}
```
:::

::: expand h4: Add new shipment to existing multi collo shipment

This example adds a new shipment to multi collo shipment 12345

##### Request

```
PUT https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8;version=1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "id": 12345,
        "reference_identifier": "FOO-222-BAR-42",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "label_description": "My custom description"
        },
        "secondary_shipments": [
          {
            "id": 12346,
            "reference_identifier": "SECONDARY-SHIPMENT"
          },
          { }
        ],
        "carrier": 1
      }
    ]
  }
}
```

##### Response

```
HTTP/1.1 204 No Content
```
:::

::: expand h4: Add existing shipment to existing multi collo shipment

This example adds existing shipment 12346 to multi collo shipment 12345

##### Request

```
PUT https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8;version=1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "id": 12346,
        "reference_identifier": "FOO-222-BAR-42",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "label_description": "My custom description"
        },
        "carrier": 1,
        "multi_collo_main_shipment_id": 12345
      }
    ]
  }
}
```

##### Response

```
HTTP/1.1 204 No Content
```
:::

::: expand h4: Delete and remove shipment from multi collo shipment

This example deletes and removes existing shipment 12346 from multi collo
shipment 12345 by omitting the shipment in the secondary shipment property

##### Request

```
PUT https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8;version=1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

```json
{
  "data": {
    "shipments": [
      {
        "id": 12345,
        "reference_identifier": "FOO-222-BAR-42",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "label_description": "My custom description"
        },
        "secondary_shipments": [
          {
            "id": 12347,
            "reference_identifier": "SECONDARY-SHIPMENT"
          }
        ],
        "carrier": 1
      }
    ]
  }
}
```

##### Response

```
HTTP/1.1 204 No Content
```
:::

::: expand h4: Remove shipment from multi collo shipment without deletion

This example removes existing shipment 12346 from multi collo shipment 12345 by
removing the relation to the multi collo main shipment.

##### Request

```
PUT https://api.myparcel.nl/shipments HTTP/1.1
Content-Type: application/vnd.shipment+json;charset=utf-8;version=1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
`

```json
{
  "data": {
    "shipments": [
      {
        "id": 12346,
        "reference_identifier": "FOO-222-BAR-42",
        "recipient": {
          "cc": "NL",
          "region": "Zuid-Holland",
          "city": "Hoofddorp",
          "street": "Antareslaan",
          "number": "31",
          "postal_code": "2132JE",
          "person": "Mr. Parcel",
          "phone": "0233030315",
          "email": "testing@myparcel.nl"
        },
        "options": {
          "package_type": 1,
          "label_description": "My custom description"
        },
        "carrier": 1,
        "multi_collo_main_shipment_id": null
      }
    ]
  }
}
```

##### Response

```
HTTP/1.1 204 No Content
```
:::

::: expand h4: Delete and remove shipment from a multi collo shipment via DELETE request

This example deletes and removes existing shipment 12346 from multi collo
shipment by deleting the secondary shipment.

##### Request

```
DELETE https://api.myparcel.nl/shipments/12346 HTTP/1.1
User-Agent: CustomApiCall/2
Authorization: bearer BASE64_ENCODED_API_KEY
```

##### Response

```
HTTP/1.1 204 No Content
```
:::

[Webhook]: /api-reference/04.data-types#Webhook

[array]: /api-reference/04.data-types#array

[boolean]: /api-reference/04.data-types#boolean

[carrier]: /api-reference/04.data-types#carrier

[coordinates]: /api-reference/04.data-types#coordinates

[country_code]: /api-reference/04.data-types#country_code

[currency]: /api-reference/04.data-types#currency

[date]: /api-reference/04.data-types#date

[delivery_type]: /api-reference/04.data-types#delivery_type

[description]: /api-reference/04.data-types#description

[eori_number]: /api-reference/04.data-types#eori_number

[float]: /api-reference/04.data-types#float

[integer]: /api-reference/04.data-types#integer

[isic_code]: /api-reference/04.data-types#isic_code

[label_position]: /api-reference/04.data-types#label_position

[main]: /api-reference/04.data-types#main

[month_digit]: /api-reference/04.data-types#month_digit

[package_contents]: /api-reference/04.data-types#package_contents

[package_type]: /api-reference/04.data-types#package_type

[paper_size]: /api-reference/04.data-types#paper_size

[platform]: /api-reference/04.data-types#platform

[price]: /api-reference/04.data-types#price

[shipment_status]: /api-reference/04.data-types#shipment_status

[sort_order]: /api-reference/04.data-types#sort_order

[string]: /api-reference/04.data-types#string

[text]: /api-reference/04.data-types#text

[time]: /api-reference/04.data-types#time

[timestamp]: /api-reference/04.data-types#timestamp

[vat_number]: /api-reference/04.data-types#vat_number

[weekday_digit]: /api-reference/04.data-types#weekday_digit

[weekday_string]: /api-reference/04.data-types#weekday_string
